SPR_calculate_debt_time = {
	if = {
		limit = { check_variable = { debt_level = 50 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 802 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 49 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 778 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 48 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 756 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 47 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 734 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 46 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 712 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 45 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 692 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 44 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 671 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 43 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 652 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 42 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 633 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 41 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 614 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 40 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 596 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 39 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 579 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 38 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 562 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 37 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 546 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 36 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 530 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 35 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 514 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 34 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 499 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 33 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 485 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 32 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 471 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 31 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 457 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 30 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 444 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 29 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 431 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 28 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 418 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 27 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 406 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 26 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 394 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 25 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 383 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 24 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 372 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 23 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 361 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 22 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 350 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 21 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 340 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 20 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 330 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 19 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 320 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 18 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 311 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 17 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 302 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 16 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 293 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 15 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 285 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 14 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 276 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 13 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 268 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 12 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 260 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 11 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 253 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 10 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 245 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 9 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 238 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 8 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 231 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 7 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 225 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 6 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 218 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 5 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 212 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 4 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 205 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 3 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 199 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 2 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 194 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 1 } }
		add_days_mission_timeout = { mission = SPR_paying_debt_decision days = 188 }
	}
	else_if = {
		limit = { check_variable = { debt_level = 0 } }
		clr_country_flag = has_debt
	}
}


SPR_old_calculate_debt_time = {
	if = {
		limit = {
			has_variable = SPR_debt_payment_time_mod
		}
	}
	else = {
		set_variable = {
			var = SPR_debt_payment_time_mod
			value = 0
		}
	}
	set_variable = {
		var = SPR_math_1
		value = 1
	}
	set_variable = {
		var = SPR_math_2
		value = 1.03
	}
	SPR_math_operation_1 = yes
	multiply_variable = {
		var = SPR_math_2
		value = 183
	}
	add_to_variable = {
		var = SPR_math_2
		value = SPR_debt_payment_time_mod
	}
	set_variable = {
		var = SPR_debt_payment_time
		value = SPR_math_2
	}
}

SPR_math_operation_1 = {
	if = {
		limit = {
			check_variable = { SPR_math_1 = debt_level }
		}
	}
	else = {
		multiply_variable = {
			var = SPR_math_2
			value = 1.03
		}
		add_to_variable = {
			var = SPR_math_1
			value = 1
		}
		SPR_math_operation_1 = yes
	}
}

SPR_debt_calculation_scripted_effect_for_debt_increase = {
	if = {
		limit = { 
			TAG = SPR
			NOT = { has_country_flag = has_debt } 
		}
		set_country_flag = has_debt
		activate_mission = SPR_paying_debt_decision
		THIS = { country_event = { id = calc_spain_debt.1 days = 1 } }
	}
}

debt_level_cleared_effect = {
	hidden_effect = {
		country_event = { id = egy_debt_system.9 }
	}
}

debt_related_country_content_effects = {
	hidden_effect = {
		if = {
			limit = { 
				check_variable = { debt_level > 49 }
				NOT = { has_country_flag = debt_declared_bankruptcy_flag }
			}
			set_country_flag = debt_declared_bankruptcy_flag
			country_event = { id = egy_debt_system.7 days = 1}
		}
		#else_if = {
		#	limit = { 
		#		has_country_flag = debt_declared_bankruptcy_flag
		#		has_idea = edc_bankrupt
		#		check_variable = { debt_level < 20 }
		#	}
		#	country_event = { id = egy_debt_system_managed.1 }
		#}
		#else_if = {
		#	limit = { 
		#		has_country_flag = debt_declared_bankruptcy_flag
		#		has_idea = edc_bankrupt_reduced
		#		check_variable = { debt_level > 19 }
		#	}
		#	country_event = { id = egy_debt_system_managed.2 }
		#}
		else_if = {
			limit = { 
				check_variable = { debt_level < 1 }
			}
			country_event = { id = egy_debt_system.9 days = 1}
		}
	}
}

debt_level_checks_effect = {
	hidden_effect = {
		clamp_variable = {
			var = debt_level
			min = 0
			max = 50
		}
		if = {
			limit = { check_variable = { debt_level > 0 } }
			if = {
				limit = { NOT = { has_idea = egy_vic_debt } }
				add_ideas = egy_vic_debt
			}
		}
		else_if = {
			limit = { check_variable = { debt_level < 1 } }
			if = {
				limit = { has_idea = egy_vic_debt }
				remove_ideas = egy_vic_debt
			}
		}
	}
}
######################################
#		   Colonial Profits			 #
#									 #
#Profits are a decimal, so 25 is 0.25#
######################################
add_colonial_profits_in_state_by_5 = {
	if = {
		limit = { OWNER = { is_subject = yes OVERLORD = { has_idea = egy_vic_debt } }  }
		custom_effect_tooltip = add_colonial_profits_in_state_by_5_colonial_loc
	}
	else_if = {
		limit = { OWNER = { PREV = { is_core_of = PREV } } }
		custom_effect_tooltip = add_colonial_profits_in_state_by_5_normal_loc
	}
	else = { custom_effect_tooltip = add_colonial_profits_in_state_by_5_colonial_loc }
	hidden_effect = { add_to_variable = { var = colonial_profits_in_state value = 0.05 } }
}
add_colonial_profits_in_state_by_10 = {
	if = {
		limit = { OWNER = { is_subject = yes OVERLORD = { has_idea = egy_vic_debt } }  }
		custom_effect_tooltip = add_colonial_profits_in_state_by_10_colonial_loc
	}
	else_if = {
		limit = { OWNER = { PREV = { is_core_of = PREV } } }
		custom_effect_tooltip = add_colonial_profits_in_state_by_10_normal_loc
	}
	else = { custom_effect_tooltip = add_colonial_profits_in_state_by_10_colonial_loc }
	hidden_effect = { add_to_variable = { var = colonial_profits_in_state value = 0.10 } }
}
add_colonial_profits_in_state_by_15 = {
	if = {
		limit = { OWNER = { is_subject = yes OVERLORD = { has_idea = egy_vic_debt } }  }
		custom_effect_tooltip = add_colonial_profits_in_state_by_15_colonial_loc
	}
	else_if = {
		limit = { OWNER = { PREV = { is_core_of = PREV } } }
		custom_effect_tooltip = add_colonial_profits_in_state_by_15_normal_loc
	}
	else = { custom_effect_tooltip = add_colonial_profits_in_state_by_15_colonial_loc }
	hidden_effect = { add_to_variable = { var = colonial_profits_in_state value = 0.15 } }
}
add_colonial_profits_in_state_by_25 = {
	if = {
		limit = { OWNER = { is_subject = yes OVERLORD = { has_idea = egy_vic_debt } }  }
		custom_effect_tooltip = add_colonial_profits_in_state_by_25_colonial_loc
	}
	else_if = {
		limit = { OWNER = { PREV = { is_core_of = PREV } } }
		custom_effect_tooltip = add_colonial_profits_in_state_by_25_normal_loc
	}
	else = { custom_effect_tooltip = add_colonial_profits_in_state_by_25_colonial_loc }
	hidden_effect = { add_to_variable = { var = colonial_profits_in_state value = 0.25 } }
}
add_colonial_profits_in_state_by_50 = {
	if = {
		limit = { OWNER = { is_subject = yes OVERLORD = { has_idea = egy_vic_debt } }  }
		custom_effect_tooltip = add_colonial_profits_in_state_by_50_colonial_loc
	}
	else_if = {
		limit = { OWNER = { PREV = { is_core_of = PREV } } }
		custom_effect_tooltip = add_colonial_profits_in_state_by_50_normal_loc
	}
	else = { custom_effect_tooltip = add_colonial_profits_in_state_by_50_colonial_loc }
	hidden_effect = { add_to_variable = { var = colonial_profits_in_state value = 0.50 } }
}
add_colonial_profits_in_state_by_75 = {
	if = {
		limit = { OWNER = { is_subject = yes OVERLORD = { has_idea = egy_vic_debt } }  }
		custom_effect_tooltip = add_colonial_profits_in_state_by_75_colonial_loc
	}
	else_if = {
		limit = { OWNER = { PREV = { is_core_of = PREV } } }
		custom_effect_tooltip = add_colonial_profits_in_state_by_75_normal_loc
	}
	else = { custom_effect_tooltip = add_colonial_profits_in_state_by_75_colonial_loc }
	hidden_effect = { add_to_variable = { var = colonial_profits_in_state value = 0.75 } }
}

debt_level_increase_by_1 = {
	custom_effect_tooltip = EGY_afr_increase_debt_1
	hidden_effect = { add_to_variable = {var = debt_level value = 1} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_2 = {
	custom_effect_tooltip = EGY_afr_increase_debt_2
	hidden_effect = { add_to_variable = {var = debt_level value = 2} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_3 = {
	custom_effect_tooltip = EGY_afr_increase_debt_3
	hidden_effect = { add_to_variable = {var = debt_level value = 3} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_4 = {
	custom_effect_tooltip = EGY_afr_increase_debt_4
	hidden_effect = { add_to_variable = {var = debt_level value = 4} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_5 = {
	custom_effect_tooltip = EGY_afr_increase_debt_5
	hidden_effect = { add_to_variable = {var = debt_level value = 5} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_6 = {
	custom_effect_tooltip = EGY_afr_increase_debt_6
	hidden_effect = { add_to_variable = {var = debt_level value = 6} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_7 = {
	custom_effect_tooltip = EGY_afr_increase_debt_7
	hidden_effect = { add_to_variable = {var = debt_level value = 7} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_8 = {
	custom_effect_tooltip = EGY_afr_increase_debt_8
	hidden_effect = { add_to_variable = {var = debt_level value = 8} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_9 = {
	custom_effect_tooltip = EGY_afr_increase_debt_9
	hidden_effect = { add_to_variable = {var = debt_level value = 9} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_10 = {
	custom_effect_tooltip = EGY_afr_increase_debt_10
	hidden_effect = { add_to_variable = {var = debt_level value = 10} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_15 = {
	custom_effect_tooltip = EGY_afr_increase_debt_15
	hidden_effect = { add_to_variable = {var = debt_level value = 15} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_20 = {
	custom_effect_tooltip = EGY_afr_increase_debt_20
	hidden_effect = { add_to_variable = {var = debt_level value = 20} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_25 = {
	custom_effect_tooltip = EGY_afr_increase_debt_25
	hidden_effect = { add_to_variable = {var = debt_level value = 25} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_increase_by_30 = {
	custom_effect_tooltip = EGY_afr_increase_debt_30
	hidden_effect = { add_to_variable = {var = debt_level value = 30} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}

debt_level_decrease_by_1 = {
	custom_effect_tooltip = EGY_afr_decrease_debt_1
	hidden_effect = { add_to_variable = {var = debt_level value = -1} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_decrease_by_2 = {
	custom_effect_tooltip = EGY_afr_decrease_debt_2
	hidden_effect = { add_to_variable = {var = debt_level value = -2} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_decrease_by_3 = {
	custom_effect_tooltip = EGY_afr_decrease_debt_3
	hidden_effect = { add_to_variable = {var = debt_level value = -3} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_decrease_by_4 = {
	custom_effect_tooltip = EGY_afr_decrease_debt_4
	hidden_effect = { add_to_variable = {var = debt_level value = -4} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_decrease_by_5 = {
	custom_effect_tooltip = EGY_afr_decrease_debt_5
	hidden_effect = { add_to_variable = {var = debt_level value = -5} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_decrease_by_6 = {
	custom_effect_tooltip = EGY_afr_decrease_debt_6
	hidden_effect = { add_to_variable = {var = debt_level value = -6} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_decrease_by_7 = {
	custom_effect_tooltip = EGY_afr_decrease_debt_7
	hidden_effect = { add_to_variable = {var = debt_level value = -7} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_decrease_by_8 = {
	custom_effect_tooltip = EGY_afr_decrease_debt_8
	hidden_effect = { add_to_variable = {var = debt_level value = -8} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_decrease_by_9 = {
	custom_effect_tooltip = EGY_afr_decrease_debt_9
	hidden_effect = { add_to_variable = {var = debt_level value = -9} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}
debt_level_decrease_by_10 = {
	custom_effect_tooltip = EGY_afr_decrease_debt_10
	hidden_effect = { add_to_variable = {var = debt_level value = -10} }
	debt_level_checks_effect = yes
	debt_related_country_content_effects = yes
}